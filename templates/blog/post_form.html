<!-- templates/blog/post_form.html -->
{% extends '_base.html' %}

{% block title %}
{% if form.instance.pk %}Edit Post{% else %}Create Post{% endif %} - Tecno Pronto
{% endblock %}

{% block content %}
<div class="min-h-screen bg-[#080c0e] font-sans text-[#e3e5e8]">
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12 pt-24">
    <div class="bg-[#0F1619] rounded-2xl shadow-2xl border border-white/5 overflow-hidden">
      <div class="bg-white/[0.02] px-8 py-6 border-b border-white/5">
        <h2 class="text-2xl font-bold text-white text-center flex items-center justify-center">
          <i class="fas fa-edit mr-3 text-[#D93A00]"></i>
          {% if form.instance.pk %}Edit Post{% else %}Create New Post{% endif %}
        </h2>
      </div>
      
      <div class="p-8">
        <form method="post" novalidate>
          {% csrf_token %}
          
          {% for field in form %}
          <div class="mb-6">
            <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-white/70 mb-2">
              {{ field.label }}
            </label>
            
            {% if field.name == 'content' %}
            <div class="relative">
                <textarea name="{{ field.name }}" id="{{ field.id_for_label }}" 
                        class="w-full px-4 py-3 bg-[#080c0e] border border-white/10 text-white rounded-xl focus:ring-1 focus:ring-[#D93A00] focus:border-[#D93A00] transition duration-200 placeholder-white/30 {% if field.errors %}border-red-500 focus:ring-red-500{% endif %}" 
                        rows="12" placeholder="Write your post content here... (Markdown supported)">{{ field.value|default:'' }}</textarea>
                <div class="absolute bottom-3 right-3 text-[10px] text-white/20 font-mono pointer-events-none">Markdown</div>
            </div>
            {% else %}
            <input type="{{ field.field.widget.input_type }}" 
                   name="{{ field.name }}" 
                   id="{{ field.id_for_label }}"
                   class="w-full px-4 py-3 bg-[#080c0e] border border-white/10 text-white rounded-xl focus:ring-1 focus:ring-[#D93A00] focus:border-[#D93A00] transition duration-200 placeholder-white/30 {% if field.errors %}border-red-500 focus:ring-red-500{% endif %}"
                   value="{{ field.value|default:'' }}"
                   {% if field.field.required %}required{% endif %}>
            {% endif %}
            
            {% if field.help_text %}
            <p class="text-white/40 text-xs mt-1.5 ml-1">{{ field.help_text }}</p>
            {% endif %}
            
            {% if field.errors %}
            <div class="mt-2">
              {% for error in field.errors %}
              <p class="text-red-400 text-sm font-medium flex items-center gap-1">
                  <i class="fas fa-exclamation-circle text-xs"></i> {{ error }}
              </p>
              {% endfor %}
            </div>
            {% endif %}
          </div>
          {% endfor %}
          
          <div class="flex items-center justify-end space-x-4 mt-10 pt-6 border-t border-white/5">
            <a href="{% url 'blog:post_list' %}" class="px-6 py-2.5 border border-white/10 text-white/60 font-medium rounded-lg hover:bg-white/5 hover:text-white transition duration-200">Cancel</a>
            <button type="submit" class="px-8 py-2.5 bg-[#D93A00] hover:bg-[#b03000] text-white font-bold rounded-lg shadow-lg shadow-[#D93A00]/20 transition duration-200 flex items-center transform hover:-translate-y-0.5">
              <i class="fas fa-save mr-2"></i>
              {% if form.instance.pk %}Update Post{% else %}Post Article{% endif %}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}