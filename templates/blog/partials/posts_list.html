{% for post in posts %}
<article class="mb-8 p-4 border rounded-lg shadow hover:shadow-lg transition">
    <div class="flex justify-between items-start">
        <div>
            <h2 class="text-xl font-bold">
                <a href="{{ post.get_absolute_url }}" class="text-blue-600 hover:text-blue-800">
                    {{ post.title }}
                </a>
            </h2>
            <div class="mt-2 flex space-x-4 text-sm text-gray-500">
                <span>{{ post.created_at|date:"M d, Y" }}</span>
                <span>•</span>
                <span>{{ post.views }} views</span>
                <span>•</span>
                <span id="like-section-{{ post.slug }}">
                    {% include "blog/partials/like_button.html" %}
                </span>
            </div>
        </div>
        {% if post.category %}
        <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
            {{ post.category.name }}
        </span>
        {% endif %}
    </div>
    
    <div class="mt-4">
        <p class="text-gray-700">{{ post.content|truncatewords:30 }}</p>
    </div>
    
    <div class="mt-4">
        <a href="{{ post.get_absolute_url }}" 
           class="inline-flex items-center text-indigo-600 hover:text-indigo-800 font-medium">
            Read more
            <svg class="w-4 h-4 ml-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
        </a>
    </div>
    
    {% if post.comments.count > 0 %}
    <div class="mt-4 pt-4 border-t border-gray-100">
        <div class="flex items-center space-x-2 text-sm">
            <svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z" />
            </svg>
            <span>{{ post.comments.count }} comment{{ post.comments.count|pluralize }}</span>
        </div>
    </div>
    {% endif %}
</article>
{% endfor %}

{% if next_url %}
<div class="flex justify-center my-8"
     hx-get="{{ next_url }}"
     hx-trigger="revealed"
     hx-swap="afterend"
     hx-indicator=".htmx-indicator">
    <span class="htmx-indicator block w-8 h-8 border-t-2 border-blue-500 rounded-full animate-spin"></span>
</div>
{% endif %}