<div class="flex space-x-4 border-b border-white/5 pb-8 last:border-0 last:pb-0 group" id="comment-{{ comment.id }}">
  <div class="flex-shrink-0">
     <img src="https://ui-avatars.com/api/?name={{ comment.author.username }}&background=2d3748&color=fff" 
          alt="{{ comment.author.username }}" class="w-10 h-10 rounded-full ring-2 ring-[#0F1619]">
  </div>
  <div class="flex-grow">
    <div class="flex justify-between items-start mb-2">
      <div>
        <h6 class="text-sm font-bold text-white">{{ comment.author.get_full_name|default:comment.author.username }}</h6>
        <small class="text-white/30 text-xs">{{ comment.created_at|timesince }} fa</small>
      </div>
      
      {% if user == comment.author %}
      <div class="relative" x-data="{ open: false }">
        <button @click="open = !open" @click.away="open = false" class="text-white/20 hover:text-white transition-colors focus:outline-none p-1 rounded-full hover:bg-white/5">
          <i class="fas fa-ellipsis-v text-xs"></i>
        </button>
        <div x-show="open" 
             class="origin-top-right absolute right-0 mt-2 w-32 rounded-lg shadow-xl bg-[#13191c] border border-white/10 focus:outline-none z-10" 
             style="display: none;">
          <div class="py-1">
            <button class="w-full text-left px-4 py-2 text-xs font-medium text-white/70 hover:text-white hover:bg-white/5 flex items-center edit-comment-btn transition-colors" 
                    hx-get="{% url 'blog:comment_edit' comment.id %}"
                    hx-target="#comment-{{ comment.id }}"
                    hx-swap="outerHTML">
              <i class="fas fa-edit mr-2 text-white/30"></i>Modifica
            </button>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
    
    <div class="text-white/70 text-sm leading-relaxed comment-content prose prose-invert prose-sm max-w-none">
        {{ comment.content }}
    </div>
  </div>
</div>

<!-- Remove the "no comments" message if it exists -->
<div id="no-comments" hx-swap-oob="delete"></div>