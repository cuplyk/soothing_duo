{
    "$schema": "https://railway.app/railway.schema.json",
    "build": {
        "builder": "DOCKERFILE",
        "dockerfilePath": "Dockerfile",
        "watchPatterns": [
            "**/*.py",
            "**/*.html",
            "**/*.css",
            "pyproject.toml",
            "uv.lock",
            "Dockerfile"
        ]
    },
    "deploy": {
        "startCommand": "echo '==> Running migrations...' && python manage.py migrate --noinput && echo '==> Migrations complete. Starting Gunicorn...' && gunicorn core.wsgi:application --bind 0.0.0.0:${PORT} --workers 2 --timeout 120 --log-level debug",
        "restartPolicyType": "ON_FAILURE",
        "numReplicas": 1,
        "sleepApplication": false
    }
}